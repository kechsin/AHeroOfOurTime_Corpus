<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8"> <!-- Установка кодировки страницы -->
    <title>Поиск</title> <!-- Заголовок страницы -->

    <!-- Подключение Bootstrap CSS для стилизации страницы -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <!-- Подключение пользовательских стилей из static каталога -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style_project.css') }}">

    <script>
        // Функция для копирования текста в буфер обмена
        function copyText(text, buttonId) {
            navigator.clipboard.writeText(text).then(function() {
                // Найти кнопку по уникальному id и сменить иконку на галочку
                const button = document.getElementById(buttonId);
                button.innerHTML = '<i class="bi bi-check-circle"></i>'; // Замена на иконку Bootstrap для галочки

                // Вернуть иконку копирования обратно через 2 секунды
                setTimeout(() => {
                    button.innerHTML = '<i class="bi bi-clipboard"></i>'; // Иконка для копирования
                }, 2000);
            }).catch(function(error) {
                console.error('Ошибка копирования:', error); // Вывод ошибки в консоль, если копирование не удалось
            });
        }
    </script>

    <!-- Подключение иконок Bootstrap для использования в кнопках -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css">
</head>
<body style="background-color: rgb(242, 205, 172)"> <!-- Установка фона страницы -->

<!-- Навигационная панель -->
<div class="navbar">
    <a href="{{ url_for('home') }}"><b>Главная страница</b></a> <!-- Ссылка на главную страницу -->
    <a href="{{ url_for('search') }}"><b>Поиск по корпусу</b></a> <!-- Ссылка на страницу поиска -->
    <a href="https://github.com/kechsin/AHeroOfOurTime_Corpus/tree/main" target="_blank"><b>Наш GitHub</b></a> <!-- Ссылка на GitHub проект -->
</div>

<!-- Контейнер для формы поиска -->
<div class="container">
    <div class="search-container d-flex justify-content-center"> <!-- Центрирование контейнера -->
        <form method="POST" action="{{ url_for('search') }}" class="d-flex"> <!-- Форма отправки поискового запроса -->
            <input type="text" name="query" class="search-input" placeholder="Например, NOUN VERB" required> <!-- Поле для ввода запроса -->
            <button type="submit" class="search-button">Поиск</button> <!-- Кнопка для отправки запроса -->
        </form>
    </div>
</div>

<!-- Блок для отображения результатов поиска -->
<div class="container mt-3">
    <div class="examples">
        {% if query %} <!-- Проверка, есть ли введенный запрос -->
            <h3 class="result-text">Результаты поиска для: "{{ query }}"</h3> <!-- Заголовок с введенным запросом -->
            <p class="result-text">Количество примеров: {{ results|length }}</p> <!-- Отображение количества найденных результатов -->
            <ul class="list-group"> <!-- Список результатов -->
                {% for result in results %} <!-- Итерация по найденным результатам -->
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <i>{{ result }}</i> <!-- Текст результата курсивом -->
                        <!-- Кнопка копирования с уникальным id для каждого результата -->
                        <button id="copy-btn-{{ loop.index }}" class="btn btn-outline-secondary btn-sm" onclick="copyText('{{ result }}', 'copy-btn-{{ loop.index }}')" title="Копировать текст">
                            <i class="bi bi-clipboard"></i> <!-- Иконка для копирования -->
                        </button>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
</div>

<div style="height: 20px;"></div> <!-- Пробел между блоками -->

<!-- Подключение необходимых скриптов для работы Bootstrap -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
</html>
